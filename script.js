// Translations
const translations = {
  en: {
    "nav-home": "Home",
    "nav-products": "Cheats",
    "nav-testimonials": "Reviews",
    "nav-support": "Support",
    "nav-discord": "Discord",
    "hero-title": "Premium HaxBall Scripts & Cheats",
    "hero-subtitle":
      "Professional-grade HaxBall tools designed to dominate matches and enhance your competitive gameplay with advanced AI-powered features",
    "stat-customers": "Satisfied Players",
    "stat-support": "Support Available",
    "stat-uptime": "Success Rate",
    "hero-cta": "Explore Cheats",
    "hero-discord": "Join Discord",
    "products-title": "Our Premium HaxBall Scripts",
    "products-subtitle": "Choose from our collection of professional HaxBall enhancement scripts designed by experts",
    "badge-sale": "ON SALE",
    "badge-coming": "COMING SOON",
    "badge-unavailable": "TEMPORARILY UNAVAILABLE",
    "product1-title": "OP Mode",
    "product1-desc":
      "With OP Mode, you become more unpredictable to your opponents, improving your movement significantly. Your better fake x become much more effective, and ball control is enhanced for better gameplay.",
    "product2-title": "Macro",
    "product2-desc":
      "Advanced macro system for faster clicking and superior opponent penetration. Automate your actions for competitive advantage.",
    "product3-title": "SUPERMODE",
    "product3-desc":
      "The ultimate HaxBall enhancement - more powerful than OP Mode with advanced features and superior performance.",
    "feature-movement": "Enhanced Movement",
    "feature-control": "Ball Control",
    "feature-fake": "Better Fake X",
    "feature-speed": "Speed Boost",
    "feature-penetration": "Opponent Penetration",
    "feature-automation": "Full Automation",
    "feature-power": "Maximum Power",
    "feature-advanced": "Advanced Features",
    "feature-superior": "Superior Performance",
    "btn-buy": "Buy Now",
    "btn-notify": "Notify Me",
    "btn-unavailable": "Currently Unavailable",
    "testimonials-title": "What Our Players Say About OP Mode",
    testimonial1:
      '"OP Mode completely changed my HaxBall game! My movement is so much better and opponents can\'t predict me anymore!"',
    "testimonial1-role": "Anonymous Player",
    testimonial2: '"The better fake x feature is incredible! I can fool any defender now. Best purchase ever!"',
    "testimonial2-role": "Anonymous Player",
    testimonial3: '"OP Mode made me unstoppable! The ball control improvement is insane, I dominate every match!"',
    "testimonial3-role": "Anonymous Player",
    "support-title": "24/7 Premium Support",
    "support-desc":
      "Our dedicated support team is available around the clock to help you with installation, setup, and any issues.",
    "support-feature1-title": "24/7 Availability",
    "support-feature1-desc": "Round-the-clock support via Discord and private messages",
    "support-feature2-title": "Fast Response",
    "support-feature2-desc": "Average response time under 15 minutes",
    "support-feature3-title": "Expert Team",
    "support-feature3-desc": "Experienced HaxBall developers ready to help",
    "chat-online": "Online - Avg. response 2min",
    "chat-message1": "How can I help you today?",
    "chat-message2": "Need help with OP Mode installation",
    "chat-message3": "I'll guide you through the setup process!",
    "discord-title": "Join Our Discord for Exclusive Cheat Offers",
    "discord-desc":
      "Get access to exclusive cheat deals, early releases, and special discounts available only on our Discord server",
    "creator-title": "Created by",
    "creator-badge": "Verified Developer",
    "discord-active": "Online",
    "channel-general": "general",
    "channel-support": "support",
    "channel-updates": "updates",
    "discord-join": "Join Discord Server",
    "payment-title": "100% Secure Payment Processing",
    "payment-security": "All transactions are secured with PayPal's advanced encryption and fraud protection",
    "footer-desc": "Premium HaxBall cheats and enhancement tools for competitive players worldwide",
  },
  es: {
    "nav-home": "Inicio",
    "nav-products": "Cheats",
    "nav-testimonials": "Reseñas",
    "nav-support": "Soporte",
    "nav-discord": "Discord",
    "hero-title": "Cheats Premium para HaxBall y Herramientas",
    "hero-subtitle":
      "Cheats de grado profesional diseñados para dominar partidas de HaxBall y mejorar tu gameplay competitivo con características avanzadas impulsadas por IA",
    "stat-customers": "Jugadores Satisfechos",
    "stat-support": "Soporte Disponible",
    "stat-uptime": "Tasa de Éxito",
    "hero-cta": "Explorar Cheats",
    "hero-discord": "Unirse a Discord",
    "products-title": "Nuestros Cheats Premium para HaxBall",
    "products-subtitle":
      "Elige de nuestra colección de scripts profesionales de mejora para HaxBall diseñados por expertos",
    "badge-sale": "EN OFERTA",
    "badge-coming": "PRÓXIMAMENTE",
    "badge-unavailable": "TEMPORALMENTE NO DISPONIBLE",
    "product1-title": "OP Mode",
    "product1-desc":
      "Con OP Mode, te vuelves más impredecible para tus oponentes, mejorando significativamente tu movimiento. Tu mejor fake x se vuelve mucho más efectivo, y el control del balón se mejora para un mejor gameplay.",
    "product2-title": "Macro",
    "product2-desc":
      "Sistema de macro avanzado para clics más rápidos y penetración superior del oponente. Automatiza tus acciones para ventaja competitiva.",
    "product3-title": "SUPERMODE",
    "product3-desc":
      "La mejora definitiva de HaxBall - más poderoso que OP Mode con características avanzadas y rendimiento superior.",
    "feature-movement": "Movimiento Mejorado",
    "feature-control": "Control del Balón",
    "feature-fake": "Mejor Fake X",
    "feature-speed": "Aumento de Velocidad",
    "feature-penetración": "Penetración del Oponente",
    "feature-automation": "Automatización Completa",
    "feature-power": "Máximo Poder",
    "feature-advanced": "Características Avanzadas",
    "feature-superior": "Rendimiento Superior",
    "btn-buy": "Comprar Ahora",
    "btn-notify": "Notificarme",
    "btn-unavailable": "Actualmente No Disponible",
    "testimonials-title": "Lo Que Dicen Nuestros Jugadores Sobre OP Mode",
    testimonial1:
      '"¡OP Mode cambió completamente mi juego de HaxBall! Mi movimiento es mucho mejor y los oponentes ya no pueden predecirme!"',
    "testimonial1-role": "Jugador Anónimo",
    testimonial2:
      '"¡La función de mejor fake x es increíble! Ahora puedo engañar a cualquier defensor. ¡La mejor compra!"',
    "testimonial2-role": "Jugador Anónimo",
    testimonial3: '"¡OP Mode me hizo imparable! La mejora del control del balón es increíble, domino cada partido!"',
    "testimonial3-role": "Jugador Anónimo",
    "support-title": "Soporte Premium 24/7",
    "support-desc":
      "Nuestro equipo de soporte dedicado está disponible las 24 horas para ayudarte con instalación, configuración y cualquier problema.",
    "support-feature1-title": "Disponibilidad 24/7",
    "support-feature1-desc": "Soporte las 24 horas vía Discord y mensajes privados",
    "support-feature2-title": "Respuesta Rápida",
    "support-feature2-desc": "Tiempo promedio de respuesta menor a 15 minutos",
    "support-feature3-title": "Equipo Experto",
    "support-feature3-desc": "Desarrolladores experimentados de HaxBall listos para ayudar",
    "chat-online": "En Línea - Respuesta promedio 2min",
    "chat-message1": "¿Cómo puedo ayudarte hoy?",
    "chat-message2": "Necesito ayuda con la instalación de OP Mode",
    "chat-message3": "¡Te guiaré a través del proceso de configuración!",
    "discord-title": "Únete a Nuestro Discord para Ofertas Exclusivas de Cheats",
    "discord-desc":
      "Obtén acceso a ofertas exclusivas de cheats, lanzamientos anticipados y descuentos especiales disponibles solo en nuestro servidor Discord",
    "creator-title": "Creado por",
    "creator-badge": "Desarrollador Verificado",
    "discord-active": "En Línea",
    "channel-general": "general",
    "channel-support": "soporte",
    "channel-updates": "actualizaciones",
    "discord-join": "Unirse al Servidor Discord",
    "payment-title": "Procesamiento de Pagos 100% Seguro",
    "payment-security":
      "Todas las transacciones están aseguradas con el cifrado avanzado y protección contra fraudes de PayPal",
    "footer-desc": "Cheats premium para HaxBall y herramientas de mejora para jugadores competitivos en todo el mundo",
  },
}

// Current language
let currentLanguage = "en"

// Theme management
const themeToggle = document.getElementById("theme-toggle")
const body = document.body

// Check for saved theme preference or default to dark mode
const savedTheme = localStorage.getItem("theme") || "dark"
body.setAttribute("data-theme", savedTheme)
updateThemeIcon(savedTheme)

themeToggle.addEventListener("click", () => {
  const currentTheme = body.getAttribute("data-theme")
  const newTheme = currentTheme === "dark" ? "light" : "dark"

  body.setAttribute("data-theme", newTheme)
  localStorage.setItem("theme", newTheme)
  updateThemeIcon(newTheme)
})

function updateThemeIcon(theme) {
  const icon = themeToggle.querySelector("i")
  icon.className = theme === "dark" ? "fas fa-sun" : "fas fa-moon"
}

// Language management
const languageSelector = document.getElementById("language-selector")

languageSelector.addEventListener("change", (e) => {
  currentLanguage = e.target.value
  updateLanguage()
  localStorage.setItem("language", currentLanguage)
})

// Load saved language preference
const savedLanguage = localStorage.getItem("language") || "en"
currentLanguage = savedLanguage
languageSelector.value = savedLanguage
updateLanguage()

function updateLanguage() {
  const elements = document.querySelectorAll("[data-translate]")
  elements.forEach((element) => {
    const key = element.getAttribute("data-translate")
    if (translations[currentLanguage] && translations[currentLanguage][key]) {
      element.textContent = translations[currentLanguage][key]
    }
  })
}

// Modal utilities
function createModal(content) {
  const modal = document.createElement("div")
  modal.id = "purchase-modal"
  modal.style.cssText = `
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: var(--bg-primary);
  padding: 40px;
  border-radius: 20px;
  box-shadow: var(--shadow-2xl);
  border: 1px solid var(--border-color);
  z-index: 10000;
  max-width: 500px;
  width: 90%;
  animation: modalSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
`

  modal.innerHTML = content

  const overlay = document.createElement("div")
  overlay.id = "modal-overlay"
  overlay.style.cssText = `
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
  z-index: 9999;
  animation: fadeIn 0.3s ease;
`

  document.body.appendChild(overlay)
  document.body.appendChild(modal)

  overlay.addEventListener("click", closeModal)

  return modal
}

function closeModal() {
  const modal = document.getElementById("purchase-modal")
  const overlay = document.getElementById("modal-overlay")

  if (modal) {
    modal.style.animation = "modalSlideOut 0.3s cubic-bezier(0.4, 0, 0.2, 1)"
    overlay.style.animation = "fadeOut 0.3s ease"

    setTimeout(() => {
      if (modal.parentNode) modal.parentNode.removeChild(modal)
      if (overlay.parentNode) overlay.parentNode.removeChild(overlay)
    }, 300)
  }
}

// Add modal animations to CSS
const modalStyles = document.createElement("style")
modalStyles.textContent = `
@keyframes modalSlideIn {
  from {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.9);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}

@keyframes modalSlideOut {
  from {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  to {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.9);
  }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}
`
document.head.appendChild(modalStyles)

// Smooth scrolling for navigation links
document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
  anchor.addEventListener("click", function (e) {
    e.preventDefault()
    const target = document.querySelector(this.getAttribute("href"))
    if (target) {
      target.scrollIntoView({
        behavior: "smooth",
        block: "start",
      })
    }
  })
})

// Navbar scroll effect
window.addEventListener("scroll", () => {
  const navbar = document.querySelector(".navbar")
  const currentTheme = body.getAttribute("data-theme")

  if (window.scrollY > 50) {
    navbar.style.background = currentTheme === "dark" ? "rgba(17, 24, 39, 0.95)" : "rgba(255, 255, 255, 0.95)"
    navbar.style.boxShadow = "var(--shadow-lg)"
  } else {
    navbar.style.background = currentTheme === "dark" ? "rgba(17, 24, 39, 0.8)" : "rgba(255, 255, 255, 0.8)"
    navbar.style.boxShadow = "none"
  }
})

// Animate elements on scroll
const observerOptions = {
  threshold: 0.1,
  rootMargin: "0px 0px -50px 0px",
}

const observer = new IntersectionObserver((entries) => {
  entries.forEach((entry) => {
    if (entry.isIntersecting) {
      entry.target.style.opacity = "1"
      entry.target.style.transform = "translateY(0)"

      // Animate counters
      if (entry.target.hasAttribute("data-count")) {
        animateCounter(entry.target)
      }
    }
  })
}, observerOptions)

// Observe elements for animation
document
  .querySelectorAll(".product-card, .testimonial-card, .support-feature, .feature-card, .stat-card")
  .forEach((el) => {
    el.style.opacity = "0"
    el.style.transform = "translateY(30px)"
    el.style.transition = "all 0.8s cubic-bezier(0.4, 0, 0.2, 1)"
    observer.observe(el)
  })

// Counter animation
function animateCounter(element) {
  const target = Number.parseInt(element.getAttribute("data-count"))
  const duration = 2000
  const step = target / (duration / 16)
  let current = 0

  const timer = setInterval(() => {
    current += step
    if (current >= target) {
      current = target
      clearInterval(timer)
    }
    element.textContent = Math.floor(current) + (target === 99 ? "%" : "+")
  }, 16)
}

// Testimonials carousel
let currentTestimonial = 0
const testimonials = document.querySelectorAll(".testimonial-card")
const dots = document.querySelectorAll(".dot")

function showTestimonial(index) {
  testimonials.forEach((testimonial, i) => {
    testimonial.classList.toggle("active", i === index)
  })

  dots.forEach((dot, i) => {
    dot.classList.toggle("active", i === index)
  })
}

function nextTestimonial() {
  currentTestimonial = (currentTestimonial + 1) % testimonials.length
  showTestimonial(currentTestimonial)
}

function prevTestimonial() {
  currentTestimonial = (currentTestimonial - 1 + testimonials.length) % testimonials.length
  showTestimonial(currentTestimonial)
}

// Carousel controls
document.querySelector(".carousel-btn.next")?.addEventListener("click", nextTestimonial)
document.querySelector(".carousel-btn.prev")?.addEventListener("click", prevTestimonial)

dots.forEach((dot, index) => {
  dot.addEventListener("click", () => {
    currentTestimonial = index
    showTestimonial(currentTestimonial)
  })
})

// Auto-rotate testimonials
setInterval(nextTestimonial, 5000)

// Product card interactions
document.querySelectorAll(".product-card").forEach((card) => {
  card.addEventListener("mouseenter", function () {
    if (!this.classList.contains("unavailable")) {
      this.style.transform = "translateY(-12px) scale(1.02)"
    }
  })

  card.addEventListener("mouseleave", function () {
    this.style.transform = "translateY(-8px) scale(1)"
  })
})

// Notify button functionality
document.querySelectorAll(".btn-notify").forEach((button) => {
  button.addEventListener("click", () => {
    const modal = createModal(`
    <div style="text-align: center;">
      <div style="margin-bottom: 20px;">
        <i class="fas fa-bell" style="font-size: 3rem; color: var(--accent-color);"></i>
      </div>
      <h3 style="margin-bottom: 15px; color: var(--text-primary);">Notification Set!</h3>
      <p style="color: var(--text-secondary); margin-bottom: 20px;">
        You'll be notified when Macro becomes available. Join our Discord for instant updates!
      </p>
      <div style="display: flex; gap: 12px; justify-content: center;">
        <a href="https://discord.com/invite/anjpXSpxYK" target="_blank" class="btn btn-discord" style="text-decoration: none;">
          <i class="fab fa-discord"></i>
          <span>Join Discord</span>
        </a>
        <button onclick="closeModal()" class="btn btn-secondary">
          <span>Close</span>
        </button>
      </div>
    </div>
  `)
  })
})

// Demo button functionality
document.querySelectorAll(".btn-demo").forEach((button) => {
  button.addEventListener("click", () => {
    const modal = createModal(`
    <div style="text-align: center;">
      <div style="margin-bottom: 20px;">
        <i class="fas fa-play-circle" style="font-size: 3rem; color: var(--primary-color);"></i>
      </div>
      <h3 style="margin-bottom: 15px; color: var(--text-primary);">Demo Available on Discord</h3>
      <p style="color: var(--text-secondary); margin-bottom: 20px;">
        Join our Discord server to see live demonstrations and get a preview of OP Mode in action!
      </p>
      <div style="display: flex; gap: 12px; justify-content: center;">
        <a href="https://discord.com/invite/anjpXSpxYK" target="_blank" class="btn btn-discord" style="text-decoration: none;">
          <i class="fab fa-discord"></i>
          <span>Watch Demo</span>
        </a>
        <button onclick="closeModal()" class="btn btn-secondary">
          <span>Close</span>
        </button>
      </div>
    </div>
  `)
  })
})

// Initialize everything when DOM is loaded
document.addEventListener("DOMContentLoaded", () => {
  updateLanguage()

  // Animacja liczników
  animateCounters()

  // Pozostała inicjalizacja
  document.body.style.opacity = "0"
  setTimeout(() => {
    document.body.style.transition = "opacity 0.5s ease"
    document.body.style.opacity = "1"
  }, 100)

  // Inicjalizacja testimonials
  showTestimonial(0)

  // "Buy Now" button for OP Mode - Discord contact
  const buyOpModeDiscordButton = document.getElementById("buy-op-mode-discord")
  if (buyOpModeDiscordButton) {
    buyOpModeDiscordButton.addEventListener("click", () => {
      createModal(`
        <div style="text-align: center;">
          <div style="margin-bottom: 20px;">
            <i class="fab fa-discord" style="font-size: 3rem; color: #5865F2;"></i>
          </div>
          <h3 style="margin-bottom: 15px; color: var(--text-primary);">Contact on Discord to Purchase</h3>
          <p style="color: var(--text-secondary); margin-bottom: 20px;">
            To purchase OP Mode, please contact me on Discord:
          </p>
          <p style="font-weight: bold; font-size: 1.2rem; color: var(--text-primary); margin-bottom: 20px; background: var(--bg-secondary); padding: 10px; border-radius: 8px; display: inline-block;">
            haxballcheats
          </p>
          <p style="color: var(--text-secondary); margin-bottom: 30px;">
            You can also join our server for support and updates:
          </p>
          <div style="display: flex; flex-direction: column; gap: 12px; align-items: center;">
            <a href="https://discord.com/invite/anjpXSpxYK" target="_blank" class="btn btn-discord" style="text-decoration: none; width: fit-content;">
              <i class="fab fa-discord"></i>
              <span>Join Discord Server</span>
            </a>
            <button onclick="closeModal()" class="btn btn-secondary" style="width: fit-content;">
              <span>Close</span>
            </button>
          </div>
        </div>
      `)
    })
  }
})

// Funkcja do animacji liczników
function animateCounters() {
  document.querySelectorAll("[data-count]").forEach((counter) => {
    const target = Number.parseInt(counter.getAttribute("data-count"))
    const duration = 2000
    const step = target / (duration / 16)
    let current = 0

    const timer = setInterval(() => {
      current += step
      if (current >= target) {
        current = target
        clearInterval(timer)
      }
      counter.textContent = Math.floor(current) + (counter.getAttribute("data-count") === "100" ? "%" : "+")
    }, 16)
  })
}

// Add particle effects to buttons
document.querySelectorAll(".btn-glow").forEach((button) => {
  button.addEventListener("click", function (e) {
    // Only create ripple if it's not the discord buy button
    if (this.id === "buy-op-mode-discord" && e.target.closest("#buy-op-mode-discord")) {
      // This is the discord button, let its specific click handler manage the modal
    } else {
      const rect = this.getBoundingClientRect()
      const x = e.clientX - rect.left
      const y = e.clientY - rect.top

      const ripple = document.createElement("span")
      ripple.style.cssText = `
        position: absolute;
        left: ${x}px;
        top: ${y}px;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.5);
        transform: translate(-50%, -50%);
        animation: ripple 0.6s ease-out;
        pointer-events: none;
      `
      this.appendChild(ripple)

      setTimeout(() => {
        ripple.remove()
      }, 600)
    }
  })
})

// Add ripple animation
const rippleStyles = document.createElement("style")
rippleStyles.textContent = `
@keyframes ripple {
  to {
    width: 100px;
    height: 100px;
    opacity: 0;
  }
}
`
document.head.appendChild(rippleStyles)

// Performance optimization: Debounce scroll events
function debounce(func, wait) {
  let timeout
  return function executedFunction(...args) {
    const later = () => {
      clearTimeout(timeout)
      func(...args)
    }
    clearTimeout(timeout)
    timeout = setTimeout(later, wait)
  }
}

// Apply debounce to scroll handler
window.addEventListener(
  "scroll",
  debounce(() => {
    const navbar = document.querySelector(".navbar")
    const currentTheme = body.getAttribute("data-theme")

    if (window.scrollY > 50) {
      navbar.style.background = currentTheme === "dark" ? "rgba(17, 24, 39, 0.95)" : "rgba(255, 255, 255, 0.95)"
      navbar.style.boxShadow = "var(--shadow-lg)"
    } else {
      navbar.style.background = currentTheme === "dark" ? "rgba(17, 24, 39, 0.8)" : "rgba(255, 255, 255, 0.8)"
      navbar.style.boxShadow = "none"
    }
  }, 10),
)
